<script>
    async function fetchGitHubData(repo, type) {
        console.log("Fetching API data for repo " + repo);

        let response = await fetch("https://api.github.com/repos/" + repo + "/" + type);
        let data = await response.json();

        let output = "";
        for (i = 0; i < 10; i++) {
            if (i > data.length - 1) return;

            let title;
            switch (type) {
                case "releases":
                    title = data[i].name;
                    break;
                case "commits":
                    title = data[i].commit.message;
                    break;
            }

            title = title.split("\n");
            title = title[0];

            console.log(title);

            output += (title);
            if (i != data.length - 1) output += "\n";
        }
        console.log(output);
    }

    let repo = "{{ site.github_user }}/{{ site.github_repo }}";
    fetchGitHubData(repo, "releases");
    fetchGitHubData(repo, "commits");
</script>
